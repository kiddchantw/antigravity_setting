# Git Commit äº’å‹•å¼å·¥ä½œæµç¨‹

> ç•¶å·¥ä½œç›®éŒ„æœ‰å¤šå€‹ä¸ç›¸é—œçš„è®Šæ›´æ™‚ï¼Œä½¿ç”¨æ­¤äº’å‹•å¼æµç¨‹é€²è¡Œé‚è¼¯åˆ†çµ„èˆ‡åˆ†æ‰¹æäº¤ã€‚

## âš ï¸ å¼·åˆ¶äº’å‹•å¼æµç¨‹

**å¿…é ˆ**åš´æ ¼éµå¾ªä»¥ä¸‹ 7 æ­¥é©Ÿï¼š

### 1. åˆ†æè®Šæ›´
ä½¿ç”¨ `git status` å’Œ `git diff` åˆ†æç•¶å‰ç›®éŒ„ä¸­çš„æ‰€æœ‰è®Šæ›´ã€‚

```bash
git status
git diff
```

### 2. è­˜åˆ¥ç¾¤çµ„
æ ¹æ“šæª”åå’Œå…§å®¹åˆ†æï¼Œè­˜åˆ¥å‡ºç¨ç«‹çš„é‚è¼¯è®Šæ›´ç¾¤çµ„ï¼š
- **feat**ï¼šæ–°åŠŸèƒ½
- **fix**ï¼šéŒ¯èª¤ä¿®å¾©
- **docs**ï¼šæ–‡ä»¶æ›´æ–°
- **refactor**ï¼šé‡æ§‹
- **perf**ï¼šæ•ˆèƒ½æ”¹é€²
- **test**ï¼šæ¸¬è©¦ç›¸é—œ
- **chore**ï¼šå»ºæ§‹æˆ–å·¥å…·è®Šå‹•
- **style**ï¼šæ ¼å¼èª¿æ•´

### 3. ğŸ“‹ æå‡ºè¨ˆç•«ï¼ˆç­‰å¾…æ‰¹å‡†ï¼‰
**å‘ä½¿ç”¨è€…æå‡ºè¨ˆç•«**ï¼Œåˆ—å‡ºï¼š
- è­˜åˆ¥å‡ºçš„æ‰€æœ‰é‚è¼¯ç¾¤çµ„
- æ¯å€‹ commit å°‡åŒ…å«å“ªäº›æª”æ¡ˆ
- å»ºè­°çš„ commit é †åº

**âš ï¸ å¿…é ˆç­‰å¾…ä½¿ç”¨è€…æ‰¹å‡†å¾Œæ‰èƒ½ç¹¼çºŒåŸ·è¡Œ**

### 4. åˆ†æ­¥åŸ·è¡Œ
åœ¨ä½¿ç”¨è€…æ‰¹å‡†å¾Œï¼Œä¸€æ¬¡è™•ç†ä¸€å€‹ç¾¤çµ„ã€‚

### 5. ç²¾æº–æš«å­˜
å°æ–¼æ¯å€‹ commitï¼Œåªå°‡è©²ç¾¤çµ„ç›¸é—œçš„æª”æ¡ˆåŠ å…¥æš«å­˜å€ï¼š

```bash
git add <file1> <file2> <file3>
```

### 6. æ’°å¯«è¨Šæ¯
ç‚ºè©²ç¾¤çµ„æ’°å¯«æ¸…æ™°ã€æè¿°æ€§çš„ commit messageï¼Œéµå¾ª Conventional Commits æ ¼å¼ï¼š

```
<type>(<scope>): <subject>
```

è©³ç´°è¦ç¯„è«‹åƒè€ƒ `git-commit-format.md`

### 7. å±•ç¤ºé€²åº¦ä¸¦é‡è¤‡
æ¯å®Œæˆä¸€å€‹ commit å¾Œï¼š
- ä½¿ç”¨ `git status` å±•ç¤ºå‰©é¤˜çš„è®Šæ›´
- å‘Šè¨´ä½¿ç”¨è€…æ¥ä¸‹ä¾†è¦è™•ç†å“ªå€‹ç¾¤çµ„
- é‡è¤‡æµç¨‹ç›´åˆ°å·¥ä½œç›®éŒ„ä¹¾æ·¨

---

## ğŸ“ è®Šæ›´åˆ†é¡ç­–ç•¥

### è­˜åˆ¥è®Šæ›´é¡å‹
ä½¿ç”¨ `git diff <file>` æª¢æŸ¥æ¯å€‹æª”æ¡ˆçš„è®Šæ›´å…§å®¹ï¼š

```bash
git diff docs/INDEX-architecture.md
git diff lib/api/openapi_config.dart
```

### å¸¸è¦‹åˆ†é¡
- **ç•¶å‰åŠŸèƒ½ç›¸é—œ**ï¼šèˆ‡æ­£åœ¨é–‹ç™¼çš„åŠŸèƒ½ç›´æ¥ç›¸é—œ
- **æ–‡æª”æ›´æ–°**ï¼šæ–‡æª”ä¿®æ­£ã€æ ¼å¼èª¿æ•´
- **é…ç½®è®Šæ›´**ï¼šOpenAPIã€ä¾è³´æ›´æ–°ç­‰
- **éŒ¯å­—ä¿®æ­£**ï¼šç´”æ–‡å­—ä¿®æ­£
- **æ„å¤–è®Šæ›´**ï¼šä¸éœ€è¦çš„ç·¨è¼¯

---

## ğŸ› ï¸ è™•ç†ç­–ç•¥

### A. é‚„åŸä¸éœ€è¦çš„è®Šæ›´
```bash
git restore <file1> <file2>
```

### B. åˆ†åˆ¥æäº¤ç›¸é—œè®Šæ›´
```bash
# ç¬¬ä¸€å€‹ commitï¼šç•¶å‰åŠŸèƒ½
git add lib/services/new_service.dart lib/providers/new_provider.dart
git commit -m "feat(feature): å¯¦ä½œæ–°åŠŸèƒ½"

# ç¬¬äºŒå€‹ commitï¼šæ–‡æª”æ›´æ–°
git add docs/INDEX-product.md
git commit -m "docs: æ›´æ–°ç”¢å“åŠŸèƒ½ç´¢å¼•"

# ç¬¬ä¸‰å€‹ commitï¼šéŒ¯å­—ä¿®æ­£
git add docs/sessions/2025-11/21-session.md
git commit -m "docs: ä¿®æ­£éŒ¯å­—"
```

### C. ä½¿ç”¨äº’å‹•å¼æš«å­˜ï¼ˆé€²éšï¼‰
```bash
git add -p <file>  # é¸æ“‡æ€§æš«å­˜æª”æ¡ˆçš„éƒ¨åˆ†è®Šæ›´
```

---

## ğŸ“Š æäº¤é †åºå»ºè­°

1. åŠŸèƒ½å¯¦ä½œï¼ˆfeat/fixï¼‰
2. é‡æ§‹ï¼ˆrefactorï¼‰
3. æ–‡æª”æ›´æ–°ï¼ˆdocsï¼‰
4. é…ç½®è®Šæ›´ï¼ˆchoreï¼‰
5. éŒ¯å­—ä¿®æ­£ï¼ˆdocsï¼‰

---

## ğŸ’¡ ç¯„ä¾‹å ´æ™¯

### å ´æ™¯ï¼šé–‹ç™¼æ–°åŠŸèƒ½æ™‚ç™¼ç¾å…¶ä»–æª”æ¡ˆæœ‰è®Šæ›´

```bash
# 1. æª¢æŸ¥ç‹€æ…‹
git status

# ç™¼ç¾ï¼š
# - lib/services/new_service.dart (æ–°åŠŸèƒ½)
# - docs/INDEX-product.md (ç°¡åŒ–æ ¼å¼)
# - docs/sessions/old-session.md (éŒ¯å­—ä¿®æ­£)

# 2. æå‡ºè¨ˆç•«ï¼ˆå‘ä½¿ç”¨è€…å±•ç¤ºï¼‰
# ç¾¤çµ„ 1: feat(api) - æ–°å¢æœå‹™å±¤
#   - lib/services/new_service.dart
# ç¾¤çµ„ 2: docs - ç°¡åŒ–ç”¢å“ç´¢å¼•æ ¼å¼
#   - docs/INDEX-product.md
# ç¾¤çµ„ 3: docs - ä¿®æ­£ session æ–‡ä»¶éŒ¯å­—
#   - docs/sessions/old-session.md

# 3. ç­‰å¾…æ‰¹å‡†å¾ŒåŸ·è¡Œ

# 4. å…ˆæäº¤æ–°åŠŸèƒ½
git add lib/services/new_service.dart
git commit -m "feat(api): æ–°å¢æœå‹™å±¤"

# 5. ç¢ºèªæ–‡æª”ç°¡åŒ–æ˜¯å¦éœ€è¦
git diff docs/INDEX-product.md
# å¦‚æœä¸éœ€è¦ï¼šgit restore docs/INDEX-product.md
# å¦‚æœéœ€è¦ï¼š
git add docs/INDEX-product.md
git commit -m "docs: ç°¡åŒ–ç”¢å“ç´¢å¼•æ ¼å¼"

# 6. æäº¤éŒ¯å­—ä¿®æ­£
git add docs/sessions/old-session.md
git commit -m "docs: ä¿®æ­£ session æ–‡ä»¶éŒ¯å­—"

# 7. ç¢ºèªå·¥ä½œç›®éŒ„ä¹¾æ·¨
git status
```

---

## âš ï¸ Git æ“ä½œå®‰å…¨åŸå‰‡

### åŸºæœ¬åŸå‰‡
- **æ°¸é å…ˆæª¢æŸ¥ git status**ï¼šäº†è§£ç•¶å‰ç‹€æ…‹
- **åªè™•ç†ç•¶å‰è³‡æ–™å¤¾**ï¼šä¸è¦è·³å‡ºè©²è³‡æ–™å¤¾è™•ç†å…¶ä»–è·¯å¾‘çš„è®Šæ›´
- **æ–°å¢æª”æ¡ˆéœ€æ˜ç¢ºç¢ºèª**ï¼šé¿å…æ„å¤– commit æ•æ„Ÿæª”æ¡ˆ
- **ä¸è¦è‡ªå‹• push**ï¼šé™¤éä½¿ç”¨è€…æ˜ç¢ºè¦æ±‚

### æ•æ„Ÿæª”æ¡ˆè­¦å‘Šæ¸…å–®
åœ¨æäº¤å‰ï¼Œæª¢æŸ¥æ˜¯å¦åŒ…å«ä»¥ä¸‹æ•æ„Ÿæª”æ¡ˆï¼š

- `.env*`, `*.local`, `*.secret`
- `credentials.json`, `secrets.json`, `config.json`
- `*_rsa`, `*.pem`, `*.key`, `*.p12`
- `node_modules/`, `.dart_tool/`, `.DS_Store`
- `*.g.dart`, `*.freezed.dart` (generated files)

è‹¥ç™¼ç¾æ•æ„Ÿæª”æ¡ˆï¼Œå¿…é ˆè­¦å‘Šä½¿ç”¨è€…ä¸¦ç­‰å¾…ç¢ºèªã€‚

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- **Commit è¨Šæ¯æ ¼å¼è¦ç¯„**ï¼šåƒè€ƒ `git-commit-format.md`
- **Typeã€Scopeã€Subject è©³ç´°èªªæ˜**ï¼šåƒè€ƒ `git-commit-format.md`
- **Breaking Changes è™•ç†**ï¼šåƒè€ƒ `git-commit-format.md`
